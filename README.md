# BlockRoute - Decentralized Supply Chain Management

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Solidity](https://img.shields.io/badge/Solidity-0.8.20-blue.svg)](https://soliditylang.org/)
[![React](https://img.shields.io/badge/React-18.0+-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)
[![Foundry](https://img.shields.io/badge/Foundry-0.2.0+-gray.svg)](https://book.getfoundry.sh/)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![GitHub issues](https://img.shields.io/github/issues/MarcusDavidG/Block-Route)](https://github.com/MarcusDavidG/Block-Route/issues)
[![GitHub stars](https://img.shields.io/github/stars/MarcusDavidG/Block-Route)](https://github.com/MarcusDavidG/Block-Route/stargazers)

BlockRoute is a comprehensive decentralized application (dApp) built on the Sonic blockchain that revolutionizes supply chain management through transparency, efficiency, and trust. It enables users to create, track, and manage shipments with advanced features like quality checks, temperature monitoring, dispute resolution, and real-time tracking.

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [Technology Stack](#technology-stack)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Configuration](#configuration)
- [Usage](#usage)
- [API Documentation](#api-documentation)
- [Testing](#testing)
- [Deployment](#deployment)
- [Contributing](#contributing)
- [Security](#security)
- [Roadmap](#roadmap)
- [License](#license)
- [Acknowledgments](#acknowledgments)
- [Contact](#contact)

## Overview

BlockRoute addresses the critical challenges in traditional supply chain management by leveraging blockchain technology to provide:

- **Immutable Tracking**: Every shipment movement is recorded on-chain, ensuring transparency and preventing fraud.
- **Smart Quality Control**: Automated monitoring of environmental conditions with instant alerts.
- **Decentralized Dispute Resolution**: Multi-party voting system for fair and transparent conflict resolution.
- **FeeM Integration**: Earn rewards from transaction fees generated by the dApp.

## Features

### Core Features

- **Shipment Creation & Management**
  - Create detailed shipment records with product information
  - Specify origin and destination locations with GPS coordinates
  - Set temperature and humidity sensitivity parameters
  - Attach documents via IPFS for secure storage
  - Define estimated delivery dates and timelines

- **Real-time Tracking**
  - Live location updates during transit
  - Environmental monitoring (temperature, humidity)
  - Transit history with timestamps
  - Interactive map visualization
  - Status updates and notifications

- **Quality Control System**
  - Automated quality inspections
  - Pass/fail status tracking
  - Inspector notes and documentation
  - Environmental condition alerts
  - Compliance verification

- **Dispute Resolution**
  - Raise disputes with detailed descriptions
  - Multi-party voting mechanism
  - Resolution documentation
  - Status tracking and notifications

### Advanced Features

- **Role-based Access Control**
  - Manufacturer: Create and manage shipments
  - Supplier: Update shipment details
  - Carrier: Update location and environmental data
  - Quality Inspector: Perform quality checks
  - Receiver: Confirm delivery and raise disputes

- **Environmental Monitoring**
  - Temperature tracking with alerts
  - Humidity monitoring
  - Sensor data integration
  - Historical data analysis

- **Document Management**
  - IPFS integration for secure document storage
  - Hash verification for document integrity
  - Access control for sensitive documents

## Architecture

### System Architecture

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Smart         │    │   Blockchain    │
│   (React)       │◄──►│   Contracts     │◄──►│   (Sonic)       │
│                 │    │   (Solidity)    │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   User          │    │   IPFS          │    │   Oracles       │
│   Interface     │    │   Storage       │    │   (Data Feeds)  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### Smart Contract Architecture

The system is built around the `BlockRoute.sol` contract which implements the `IBlockRoute` interface:

#### Key Data Structures

```solidity
struct Shipment {
    uint256 id;
    string productName;
    string description;
    address manufacturer;
    address supplier;
    address carrier;
    address receiver;
    Location origin;
    Location destination;
    Location[] transitPoints;
    uint256 estimatedDeliveryDate;
    ShipmentStatus status;
    uint256 createdAt;
    uint256 updatedAt;
    uint256 temperature;
    uint256 humidity;
    bytes32 documentsHash;
    bool isTemperatureSensitive;
    bool isHumiditySensitive;
    uint256 qualityCheckId;
    uint256 disputeId;
    uint256 insuranceId;
    mapping(address => Role) participantRoles;
}

struct Location {
    string latitude;
    string longitude;
    string name;
    uint256 timestamp;
    address updatedBy;
}

struct QualityCheck {
    uint256 checkId;
    uint256 timestamp;
    address inspector;
    bool passed;
    string notes;
    bytes32 documentHash;
}
```

### Frontend Architecture

The frontend follows a modular architecture with:

- **Components**: Reusable UI components
- **Pages**: Route-based page components
- **Hooks**: Custom React hooks for blockchain interactions
- **Providers**: Context providers for state management
- **Config**: Configuration files for networks and contracts

## Technology Stack

### Frontend
- **Framework**: React 18 with TypeScript
- **Build Tool**: Vite
- **Styling**: TailwindCSS
- **State Management**: React Context + React Query
- **Web3 Integration**: Wagmi + ethers.js
- **Routing**: React Router v6
- **Maps**: Mapbox GL JS
- **Icons**: Lucide React

### Smart Contracts
- **Language**: Solidity 0.8.20
- **Framework**: Foundry
- **Libraries**: OpenZeppelin Contracts
- **Testing**: Forge (Foundry's test runner)
- **Deployment**: Forge scripts

### Blockchain
- **Network**: Sonic Blaze Testnet (FeeM-enabled)
- **RPC URL**: https://rpc.blaze.soniclabs.com
- **Explorer**: https://testnet.sonicscan.org
- **Chain ID**: 57054
- **Native Currency**: S (Sonic)

### Development Tools
- **Version Control**: Git
- **Package Manager**: npm
- **Code Quality**: ESLint + Prettier
- **Testing**: Jest + React Testing Library
- **Documentation**: JSDoc + Solidity NatSpec

## Prerequisites

Before running this project, ensure you have the following installed:

- **Node.js**: Version 18.0 or higher
- **Git**: Latest version
- **MetaMask**: Or any Web3-compatible wallet
- **Foundry**: For smart contract development

### Installing Prerequisites

#### Node.js
```bash
# Using nvm (recommended)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18
```

#### Foundry
```bash
curl -L https://foundry.paradigm.xyz | bash
foundryup
```

#### Git
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install git

# macOS
brew install git

# Windows
# Download from https://git-scm.com/downloads
```

## Installation

### Clone the Repository

```bash
git clone https://github.com/MarcusDavidG/Block-Route.git
cd Block-Route
```

### Install Dependencies

#### Frontend Dependencies
```bash
cd frontend
npm install
```

#### Smart Contract Dependencies
```bash
forge install
```

### Environment Setup

Create environment files for configuration:

#### Frontend (.env)
```env
VITE_WALLET_CONNECT_PROJECT_ID=your_walletconnect_project_id
VITE_MAPBOX_ACCESS_TOKEN=your_mapbox_token
VITE_INFURA_PROJECT_ID=your_infura_project_id
```

#### Smart Contracts (.env)
```env
PRIVATE_KEY=your_private_key
ETHERSCAN_API_KEY=your_etherscan_api_key
SONIC_RPC_URL=https://rpc.blaze.soniclabs.com
```

## Configuration

### Network Configuration

The application is configured to work with multiple networks:

```typescript
// frontend/src/config/chains.ts
export const sonicBlazeTestnet = {
  id: 57054,
  name: 'Sonic Blaze Testnet',
  network: 'sonic-blaze-testnet',
  nativeCurrency: {
    decimals: 18,
    name: 'Sonic',
    symbol: 'S',
  },
  rpcUrls: {
    default: { http: ['https://rpc.blaze.soniclabs.com'] },
    public: { http: ['https://rpc.blaze.soniclabs.com'] },
  },
  blockExplorers: {
    default: {
      name: 'SonicScan',
      url: 'https://testnet.sonicscan.org'
    },
  },
}
```

### Contract Addresses

Update contract addresses in the configuration:

```typescript
// frontend/src/config/contracts.ts
export const BLOCKROUTE_ADDRESS = '0x...' // Deployed contract address
export const BLOCKROUTE_ABI = [...] // Contract ABI
```

## Usage

### Starting the Development Environment

1. **Start the Frontend**
   ```bash
   cd frontend
   npm run dev
   ```

2. **Start the Smart Contract Development Environment**
   ```bash
   # In a separate terminal
   forge test
   ```

### Using the Application

1. **Connect Wallet**
   - Open the application in your browser
   - Click "Connect Wallet"
   - Select your preferred Web3 wallet
   - Approve the connection

2. **Create a Shipment**
   - Navigate to the "Create Shipment" page
   - Fill in product details
   - Set origin and destination locations
   - Configure environmental sensitivity settings
   - Submit the transaction

3. **Track a Shipment**
   - Go to the "Track Shipment" page
   - Enter the shipment ID
   - View real-time tracking information
   - Monitor environmental conditions

4. **Manage Quality Control**
   - Access the quality control dashboard
   - Review inspection results
   - Add new quality checks
   - Monitor compliance

### Smart Contract Interaction

#### Creating a Shipment
```typescript
const { write } = useCreateShipment({
  args: [
    productName,
    description,
    manufacturer,
    supplier,
    carrier,
    origin,
    destination,
    estimatedDeliveryDate,
    isTemperatureSensitive,
    isHumiditySensitive,
    documentsHash
  ]
})
```

#### Reading Shipment Data
```typescript
const { data: shipment } = useShipment(shipmentId)
```

## API Documentation

### Smart Contract Functions

#### Write Functions
- `createShipment(...)`: Create a new shipment
- `updateShipmentStatus(uint256 shipmentId, ShipmentStatus status)`: Update shipment status
- `recordQualityCheck(...)`: Add quality inspection data
- `raiseDispute(uint256 shipmentId, string reason)`: Initiate a dispute
- `updateLocation(uint256 shipmentId, Location location)`: Update shipment location

#### Read Functions
- `getShipment(uint256 shipmentId)`: Retrieve shipment details
- `getShipmentCount()`: Get total number of shipments
- `getQualityChecks(uint256 shipmentId)`: Get quality check history
- `getTransitHistory(uint256 shipmentId)`: Get location history

### Frontend Hooks

#### useBlockRoute
Main hook for blockchain interactions:

```typescript
const {
  useShipment,
  useCreateShipment,
  useUpdateShipmentStatus,
  useTransitHistory
} = useBlockRoute()
```

#### useShipment
```typescript
const { data, isLoading, error } = useShipment(shipmentId)
```

## Testing

### Smart Contract Testing

Run the test suite:
```bash
forge test
```

Run tests with gas reporting:
```bash
forge test --gas-report
```

Run specific test:
```bash
forge test --match-test testCreateShipment
```

### Frontend Testing

Run the test suite:
```bash
cd frontend
npm test
```

Run tests in watch mode:
```bash
npm run test:watch
```

Run tests with coverage:
```bash
npm run test:coverage
```

### Test Coverage

Current test coverage includes:
- Shipment creation and management
- Role-based access control
- Quality control workflows
- Dispute resolution process
- Environmental monitoring
- Error handling and edge cases

## Deployment

### Smart Contract Deployment

#### Deploy to Sonic Blaze Testnet
```bash
forge script script/DeploySonic.s.sol \
  --rpc-url https://rpc.blaze.soniclabs.com \
  --broadcast \
  --verify
```

#### Deploy to Local Network
```bash
anvil
forge script script/DeploySonic.s.sol \
  --rpc-url http://localhost:8545 \
  --broadcast
```

### Frontend Deployment

#### Build for Production
```bash
cd frontend
npm run build
```

#### Deploy to Vercel
```bash
npm install -g vercel
vercel --prod
```

#### Deploy to Netlify
```bash
npm install -g netlify-cli
netlify deploy --prod
```

### Environment Variables for Production

```env
VITE_BLOCKROUTE_CONTRACT_ADDRESS=0x...
VITE_RPC_URL=https://rpc.blaze.soniclabs.com
VITE_CHAIN_ID=57054
```

## Contributing

We welcome contributions! Please follow these guidelines:

### Development Workflow

1. **Fork the Repository**
   ```bash
   git clone https://github.com/your-username/Block-Route.git
   cd Block-Route
   ```

2. **Create a Feature Branch**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **Install Dependencies**
   ```bash
   cd frontend && npm install
   forge install
   ```

4. **Make Changes**
   - Follow the existing code style
   - Add tests for new features
   - Update documentation

5. **Run Tests**
   ```bash
   forge test
   cd frontend && npm test
   ```

6. **Commit Changes**
   ```bash
   git add .
   git commit -m "feat: add your feature description"
   ```

7. **Push and Create Pull Request**
   ```bash
   git push origin feature/your-feature-name
   ```

### Code Style Guidelines

- **Solidity**: Follow the [Solidity Style Guide](https://docs.soliditylang.org/en/latest/style-guide.html)
- **TypeScript**: Follow the [TypeScript Style Guide](https://google.github.io/styleguide/tsguide.html)
- **React**: Follow the [React Best Practices](https://react.dev/learn/thinking-in-react)
- **Git**: Use [Conventional Commits](https://conventionalcommits.org/)

### Pull Request Process

1. Ensure all tests pass
2. Update documentation if needed
3. Add screenshots for UI changes
4. Request review from maintainers
5. Address review comments

## Security

### Smart Contract Security

- **Access Control**: Role-based permissions for all operations
- **Input Validation**: Comprehensive validation of all inputs
- **Reentrancy Protection**: Guards against reentrancy attacks
- **Gas Optimization**: Efficient gas usage to minimize costs
- **Event Logging**: Comprehensive event emission for transparency

### Frontend Security

- **Wallet Security**: Secure wallet connection and transaction signing
- **Data Validation**: Client-side and server-side validation
- **Error Handling**: Proper error handling and user feedback
- **HTTPS**: Secure communication channels
- **Dependency Security**: Regular dependency updates and audits

### Security Best Practices

- Regular security audits
- Bug bounty program
- Incident response plan
- Security monitoring and alerting

## Roadmap

### Phase 1 (Current)
- ✅ Basic shipment creation and tracking
- ✅ Quality control system
- ✅ Dispute resolution
- ✅ FeeM integration

### Phase 2 (Q2 2024)
- 🔄 Multi-chain support
- 🔄 Advanced analytics dashboard
- 🔄 IoT sensor integration
- 🔄 Mobile application

### Phase 3 (Q3 2024)
- 📋 AI-powered predictive analytics
- 📋 Automated insurance claims
- 📋 Cross-border compliance
- 📋 Advanced dispute resolution

### Future Enhancements
- Layer 2 scaling solutions
- Decentralized identity integration
- Advanced machine learning features
- Global supply chain network

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgments

- **OpenZeppelin**: For secure smart contract libraries
- **Foundry**: For the excellent development framework
- **Sonic Blockchain**: For the FeeM-enabled testnet
- **React Community**: For the amazing frontend ecosystem
- **Ethereum Foundation**: For pioneering blockchain technology

## Contact

**Marcus David G.**
- GitHub: [@MarcusDavidG](https://github.com/MarcusDavidG)
- LinkedIn: [Your LinkedIn Profile]
- Email: [your.email@example.com]
- Project Link: [https://github.com/MarcusDavidG/Block-Route](https://github.com/MarcusDavidG/Block-Route)

### Live Deployment

The project is deployed and accessible at: [https://block-route.vercel.app/](https://block-route.vercel.app/)

### Support

- 📧 **Email**: For general inquiries and support
- 🐛 **Issues**: For bug reports and feature requests
- 💬 **Discussions**: For questions and community discussions
- 📖 **Documentation**: For detailed guides and API references

---

**Made with ❤️ for the decentralized future**
